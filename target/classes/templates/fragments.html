<!-- fragments.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Fragments</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet"/>
</head>
<body>

<!-- Header fragment -->
<div th:fragment="header">
    <header>
        <div class="header-content">
            <div class="left">
                <div class="home-link">
                    <p> Gestion de turnos</p>
                </div>
                <!-- <a href="/about">Acerca de</a> -->
            </div>
            <div class="right" id="header-right">
                <!--aca contenido depende de JS logica -->
            </div>
        </div>
    </header>
</div>

<!-- Footer fragment -->
<div th:fragment="footer">
    <footer>
        <div class="footer-content">
            <p style="padding: 0">Copyright &copy; 2025</p>
        </div>
    </footer>
</div>


<!-- fragments/client-menu -->
<div th:fragment="menu-cliente">
    <p class="menu-title">MENU</p>
    <nav>
        <ul class="menu-list">
            <li><a th:href="@{/cliente/reservas}">Mis Reservas</a></li>
            <li><a th:href="@{/cliente/reservas/nueva}">Nueva Reserva</a></li>
            <li><a th:href="@{/cliente/calendario}">Calendario</a></li>
            <li><a th:href="@{/cliente/salas}">Nuestras salas</a></li>
            <li><a th:href="@{/cliente/perfil}">Perfil</a></li>
        </ul>
    </nav>
</div>

<!-- fragments/admin-menu -->
<div th:fragment="menu-admin">
    <p class="menu-title">MENU</p>
    <nav>
        <ul class="menu-list">
            <li><a th:href="@{/admin/empleados}">Todos Empleados</a></li>
            <li><a th:href="@{/admin/salas}">Todas Salas</a></li>
            <li><a th:href="@{/admin/empleados/nuevo}">Crear Empleado</a></li>
            <li><a th:href="@{/admin/salas/nueva}">Crear Sala</a></li>
        </ul>
    </nav>
</div>

<!-- fragments/empleado-menu -->
<div th:fragment="menu-empleado">
    <p class="menu-title">MENU</p>
    <nav>
        <ul class="menu-list">
            <li><a th:href="@{/empleado/reservas}">Reservas activas</a></li>
            <li><a th:href="@{/empleado/reservas/nueva}">Reserva Nueva</a></li>
            <li><a th:href="@{/empleado/salas}">Salas</a></li>
            <li><a th:href="@{/empleado/clientes}">Clientes</a></li>
            <li><a th:href="@{/empleado/calendario}">Calendario</a></li>
            <li><a th:href="@{/empleado/perfil}">Perfil</a></li>
        </ul>
    </nav>
</div>

<!-- fragments/ form para crear reserva by cliente -->

<div th:fragment="reserva-form">
    <div class="form-container">
        <form id="reservaForm">
            <div class="form-row">
                <label for="salaId">№ de Sala:</label>
                <select id="salaId" name="salaId" required style="width: 120px;">
                    <option value="">Seleccione...</option>
                    <!-- JavaScript -->
                </select>
            </div>

            <div class="form-row">
                <label for="fecha">Fecha:</label>
                <input type="date" id="fecha" name="fecha" required min="" max="">
            </div>

            <div class="form-row">
                <label for="horaInicio">Hora de Inicio:</label>
                <select id="horaInicio" name="horaInicio" required></select>
            </div>

            <div class="form-row">
                <label for="horaFin">Hora de Fin:</label>
                <select id="horaFin" name="horaFin" required></select>
            </div>

            <div class="form-row">
                <label for="tipoPago">Tipo de Pago:</label>
                <select id="tipoPago" name="tipoPago" required>
                    <option value="">Seleccione...</option>
                    <option value="EFECTIVO">Efectivo</option>
                    <option value="TARJETA">Tarjeta</option>
                </select>
            </div>

            <button type="submit" style="margin-top: 15px;">Crear Reserva</button>
        </form>

        <div id="reservaResult" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>
</div>


<!-- fragments/ form para crear reserva by empleado -->

<div th:fragment="reserva-form-empleado">
    <div class="form-container">
        <form id="reservaFormEmpleado">

            <div class="form-row">
                <label for="clienteEmail">Email Cliente:</label>
                <select id="clienteEmail" name="clienteEmail" required style="width: 120px;">
                    <option value="">Seleccione...</option>
                    <!-- JavaScript -->
                </select>
            </div>
            <div class="form-row">
                <label for="salaIdByEmpleado">№ de Sala:</label>
                <select id="salaIdByEmpleado" name="salaIdByEmpleado" required style="width: 120px;">
                    <option value="">Seleccione...</option>
                </select>
            </div>

            <div class="form-row">
                <label for="fechaByEmpleado">Fecha:</label>
                <input type="date" id="fechaByEmpleado" name="fechaByEmpleado" required min="" max="">
            </div>

            <div class="form-row">
                <label for="horaInicioByEmpleado">Hora de Inicio:</label>
                <select id="horaInicioByEmpleado" name="horaInicioByEmpleado" required></select>
            </div>

            <div class="form-row">
                <label for="horaFinByEmpleado">Hora de Fin:</label>
                <select id="horaFinByEmpleado" name="horaFinByEmpleado" required></select>
            </div>

            <div class="form-row">
                <label for="tipoPagoByEmpleado">Tipo de Pago:</label>
                <select id="tipoPagoByEmpleado" name="tipoPagoByEmpleado" required>
                    <option value="">Seleccione...</option>
                    <option value="EFECTIVO">Efectivo</option>
                    <option value="TARJETA">Tarjeta</option>
                </select>
            </div>

            <button type="submit" style="margin-top: 15px;">Crear Reserva</button>
        </form>

        <div id="reservaResultEmpleado" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>
</div>


<!-- fragments/ form para crear empleado by admin -->
<div th:fragment="empleado-form">
    <form id="empleadoCrearForm">
        <div class="form-row">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required>
        </div>
        <div class="form-row">
            <label for="apellido">Apellido:</label>
            <input type="text" id="apellido" name="apellido" required>
        </div>
        <div class="form-row">
            <label for="dni">Dni:</label>
            <input type="text" id="dni" name="dni" required>
        </div>
        <div class="form-row">
            <label for="telefono">Telefono:</label>
            <input type="text" id="telefono" name="telefono" required>
        </div>
        <div class="form-row">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-row">
            <label for="legajo">Legajo:</label>
            <input type="text" id="legajo" name="legajo" required>
        </div>
        <button type="submit" style="margin-top: 15px;">Crear Empleado</button>
        <div id="empleadoResult" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </form>
</div>


<!-- fragments/ form para crear sala by admin -->
<div th:fragment="sala-form">
    <div class="form-container">
        <form id="salaForm">
            <div class="form-row">
                <label for="numero">Numero:</label>
                <input type="text" id="numero" name="numero" required>
            </div>
            <div class="form-row">
                <label for="capacidad">Capacidad:</label>
                <input type="text" id="capacidad" name="capacidad" required>
            </div>
            <div class="form-row">
                <label for="descripcion">Descripcion:</label>
                <input type="text" id="descripcion" name="descripcion" required>
            </div>
            <button type="submit" style="margin-top: 15px;">Crear Sala</button>
        </form>
        <div id="salaResult" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>
</div>


<!--fragments/reservas-table para el cliente-->
<div th:fragment="reservas-table">
    <table class="table" id="reservas-table">
        <thead>
        <tr>
            <th>Sala</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Pago</th>
            <th>Estado</th>
            <th>Acciones</th>
        </tr>
        </thead>
        <tbody id="reservasTableBody">
        <!-- aquí se insertan reservas by JS  -->
        </tbody>
    </table>
</div>


<!--fragments/salas-table para el admin-->

<div th:fragment="salas-table">

    <table class="table" id="salas-table">
        <thead>
        <tr style="gap: 10px">
            <th>Número</th>
            <th>Capacidad</th>
            <th>Descripción</th>
            <th>Accion</th>
        </tr>
        </thead>
        <tbody id="salasTableBody"></tbody>
    </table>
</div>


<!--fragments/salas-table para empleado/cliente-->

<div th:fragment="salas-table-view">

    <table class="table" id="salas-table-view">
        <thead>
        <tr style="gap: 10px">
            <th>Número</th>
            <th>Capacidad</th>
            <th>Descripción</th>
        </tr>
        </thead>
        <tbody id="salasTableBodyEmpleado"></tbody>
    </table>
</div>


<!--fragments/clientes-table para empleado-->

<div th:fragment="clientes-table-empleado">

    <table class="table" id="clientes-table-empleado">
        <thead>
        <tr style="gap: 10px">
            <th>Nombre</th>
            <th>Apellido</th>
            <th>DNI</th>
            <th>Email</th>
            <th>Teléfono</th>
        </tr>
        </thead>
        <tbody id="clientesTableBodyEmpleado"></tbody>
    </table>
</div>


<!--fragments/update-sala-form para el admin-->

<div th:fragment="update-sala-table(sala)">
    <div class="form-container">
        <form id="updateSalaForm" th:action="@{/admin/salas/update}" method="post">

            <div class="form-row">
                <label>Número:</label>
                <input type="text" th:value="${sala.numero}" disabled>
            </div>


            <div class="form-row">
                <label>Capacidad:</label>
                <input type="text" th:value="${sala.cantPersonas}" disabled>
            </div>
            <div class="form-row">
                <label for="descripcionUpdate">Descripcion:</label>
                <input type="text" id="descripcionUpdate" name="descripcion" th:value="${sala.descripcion}" required>
            </div>
            <input type="hidden" name="id" th:value="${sala.id}"/>
            <button type="submit" style="margin-top: 15px;">Confirmar</button>
        </form>
        <div id="salaUpdateResult" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>
</div>


<!--fragments/update-empleado form para el admin -->

<div th:fragment="update-empleado-table(empleado)">
    <div class="form-container">
        <form id="updateEmpleadoForm" th:action="@{/admin/empleados/update}" method="post">
            <div class="form-row">
                <label for="nombreUpdate">Nombre:</label>
                <input type="text" id="nombreUpdate" name="nombre" th:value="${empleado.nombre}" required>
            </div>
            <div class="form-row">
                <label for="apellidoUpdate">Apellido:</label>
                <input type="text" id="apellidoUpdate" name="apellido" th:value="${empleado.apellido}" required>
            </div>
            <div class="form-row">
                <label for="dniUpdate">DNI:</label>
                <input type="text" id="dniUpdate" name="dni" th:value="${empleado.dni}" required>
            </div>
            <div class="form-row">
                <label for="telefonoUpdate">Telefono:</label>
                <input type="text" id="telefonoUpdate" name="telefono" th:value="${empleado.telefono}" required>
            </div>
            <div class="form-row">
                <label for="emailUpdate">Email:</label>
                <input type="text" id="emailUpdate" name="email" th:value="${empleado.email}" required>
            </div>
            <input type="hidden" name="id" th:value="${empleado.id}"/>
            <button type="submit" style="margin-top: 15px;">Confirmar</button>
        </form>
        <div id="empleadoUpdateResult" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>
</div>


<!--fragments/empleados-table para el admin-->

<div th:fragment="empleados-table">
    <table class="table" id="empleados-table">
        <thead>
        <tr style="gap: 10px">
            <th>Legajo</th>
            <th>Nombre</th>
            <th>DNI</th>
            <th>Email</th>
            <th>Teléfono</th>
            <th>Acción</th>
        </tr>
        </thead>
        <tbody id="empleadosTableBody"></tbody>
    </table>
</div>


<!--fragments/reserva-update-form para el cliente-->

<div th:fragment="update-reserva-table(reserva)">
    <div class="form-container">
        <form id="updateReservaFormCliente">
            <!-- SALA -->
            <div class="form-row">
                <label for="salaNumeroUpdate">№ de Sala:</label>
                <select id="salaNumeroUpdate" name="salaId" required style="width: 120px;">
                    <option value="">Seleccione...</option>
                    <option th:each="sala : ${salas}"
                            th:value="${sala.id}"
                            th:text="${sala.numero}"
                            th:selected="${sala.id == reserva.sala.id}">
                    </option>
                </select>
            </div>

            <!--             FECHA-->
            <div class="form-row">
                <label for="fechaUpdate">Fecha:</label>
                <input type="date"
                       id="fechaUpdate"
                       name="fecha"
                       required
                       min=""
                       max=""
                       th:value="${fechaSoloFecha}"/>
            </div>

            <!-- HORA INICIO -->
            <div class="form-row">
                <label for="horaInicioUpdate">Hora de Inicio:</label>
                <select id="horaInicioUpdate" name="horaInicio" required>
                    <option th:each="hora : ${horas}"
                            th:value="${hora}"
                            th:text="${hora}"
                            th:selected="${hora == horaInicio}">
                    </option>
                </select>
            </div>

            <!-- HORA FIN -->
            <div class="form-row">
                <label for="horaFinUpdate">Hora de Fin:</label>
                <select id="horaFinUpdate" name="horaFin" required>
                    <option th:each="hora : ${horas}"
                            th:value="${hora}"
                            th:text="${hora}"
                            th:selected="${hora == horaFinal}">
                    </option>
                </select>
            </div>

            <!-- TIPO DE PAGO -->

            <div class="form-row">
                <label for="tipoPagoUpdate">Tipo de Pago:</label>
                <select id="tipoPagoUpdate" name="tipoPago" required>
                    <option value="">Seleccione...</option>
                    <option value="EFECTIVO"
                            th:selected="${reserva.tipoPago == T(com.utn.gestion_de_turnos.model.Reserva.TipoPago).EFECTIVO}">
                        Efectivo
                    </option>
                    <option value="TARJETA"
                            th:selected="${reserva.tipoPago == T(com.utn.gestion_de_turnos.model.Reserva.TipoPago).TARJETA}">
                        Tarjeta
                    </option>
                </select>
            </div>
            <input type="hidden" name="id" th:value="${reserva.id}"/>
            <button type="submit" style="margin-top: 15px;">Confirmar</button>
        </form>
        <div id="reservaUpdateResultCliente" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>
</div>


<!--fragments/reserva-update-form para el empleado-->

<div th:fragment="update-reserva-table-empleado(reserva)">
    <div class="form-container">
        <form id="updateReservaFormEmpleado">
            <!-- SALA -->
            <div class="form-row">
                <label for="salaNumeroUpdate1">№ de Sala:</label>
                <select id="salaNumeroUpdate1" name="salaId" required style="width: 120px;">
                    <option value="">Seleccione...</option>
                    <option th:each="sala : ${salas}"
                            th:value="${sala.id}"
                            th:text="${sala.numero}"
                            th:selected="${sala.id == reserva.sala.id}">
                    </option>
                </select>
            </div>

            <!--             FECHA-->
            <div class="form-row">
                <label for="fechaUpdate1">Fecha:</label>
                <input type="date"
                       id="fechaUpdate1"
                       name="fecha"
                       min=""
                       max=""
                       required
                       th:value="${fechaSoloFecha}"/>
            </div>

            <!-- HORA INICIO -->
            <div class="form-row">
                <label for="horaInicioUpdate1">Hora de Inicio:</label>
                <select id="horaInicioUpdate1" name="horaInicio" required>
                    <option th:each="hora : ${horas}"
                            th:value="${hora}"
                            th:text="${hora}"
                            th:selected="${hora == horaInicio}">
                    </option>
                </select>
            </div>

            <!-- HORA FIN -->
            <div class="form-row">
                <label for="horaFinUpdate1">Hora de Fin:</label>
                <select id="horaFinUpdate1" name="horaFin" required>
                    <option th:each="hora : ${horas}"
                            th:value="${hora}"
                            th:text="${hora}"
                            th:selected="${hora == horaFinal}">
                    </option>
                </select>
            </div>

            <!-- TIPO DE PAGO -->

            <div class="form-row">
                <label for="tipoPagoUpdate1">Tipo de Pago:</label>
                <select id="tipoPagoUpdate1" name="tipoPago" required>
                    <option value="">Seleccione...</option>
                    <option value="EFECTIVO"
                            th:selected="${reserva.tipoPago == T(com.utn.gestion_de_turnos.model.Reserva.TipoPago).EFECTIVO}">
                        Efectivo
                    </option>
                    <option value="TARJETA"
                            th:selected="${reserva.tipoPago == T(com.utn.gestion_de_turnos.model.Reserva.TipoPago).TARJETA}">
                        Tarjeta
                    </option>
                </select>
            </div>
            <input type="hidden" name="id" th:value="${reserva.id}"/>
            <button type="submit" style="margin-top: 15px;">Confirmar</button>
        </form>
        <div id="reservaUpdateResultEmpleado" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>
</div>


<!-- fragments/update-cliente-perfil.html -->

<div th:fragment="update-cliente-perfil(cliente)">
    <div class="form-container">
        <form id="updateClienteForm" th:action="@{/cliente/perfil/update}" method="post">
            <div class="form-row">
                <label for="nombreCliente">Nombre:</label>
                <input type="text" id="nombreCliente" name="nombre" th:value="${cliente.nombre}" disabled>
            </div>
            <div class="form-row">
                <label for="apellidoCliente">Apellido:</label>
                <input type="text" id="apellidoCliente" name="apellido" th:value="${cliente.apellido}" disabled>
            </div>
            <div class="form-row">
                <label for="dniCliente">DNI:</label>
                <input type="text" id="dniCliente" name="dni" th:value="${cliente.dni}" disabled>
            </div>
            <div class="form-row">
                <label for="telefonoCliente">Teléfono:</label>
                <input type="text" id="telefonoCliente" name="telefono" th:value="${cliente.telefono}" disabled>
            </div>
            <button type="button" id="editarPerfilBtn" style="margin-top: 15px;">Editar</button>
        </form>
        <div id="clienteUpdateResult" style="margin-top: 15px;text-align: center; color: #a7288a;"></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const editButton = document.getElementById("editarPerfilBtn");
            const form = document.getElementById("updateClienteForm");
            const inputs = form.querySelectorAll("input");

            editButton.addEventListener("click", function handler(event) {
                event.preventDefault();
                inputs.forEach(input => {
                    if (input.type !== "hidden") {
                        input.disabled = false;
                    }
                });
                editButton.textContent = "Guardar cambios";
                editButton.type = "submit";
                editButton.removeEventListener("click", handler);
            });
        });
    </script>

</div>

<!--fragments/reservas-table para el empleado-->


<div th:fragment="reservas-table-empleado">
    <table class="table" id="reservas-table-empleado">
        <thead>
        <tr>
            <th>Sala</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Pago</th>
            <th>Cliente</th>
            <th>Acciones</th>
        </tr>
        </thead>
        <tbody id="reservasTableBodyEmpleado">
        <!-- aquí se insertan reservas -->
        </tbody>
    </table>
</div>


<!-- fragments/empleado-perfil.html -->

<div th:fragment="empleado-perfil(empleado)">
    <div class="form-container">
        <form id="empleadoForm" th:action="@{/empleado/reservas}" method="get">
            <div class="form-row">
                <label for="nombreEmpleado">Nombre:</label>
                <input type="text" id="nombreEmpleado" th:value="${empleado.nombre}" disabled>
            </div>
            <div class="form-row">
                <label for="apellidoEmpleado">Apellido:</label>
                <input type="text" id="apellidoEmpleado" th:value="${empleado.apellido}" disabled>
            </div>
            <div class="form-row">
                <label for="dniEmpleado">DNI:</label>
                <input type="text" id="dniEmpleado" th:value="${empleado.dni}" disabled>
            </div>
            <div class="form-row">
                <label for="emailEmpleado">Email:</label>
                <input type="text" id="emailEmpleado" th:value="${empleado.email}" disabled>
            </div>
            <div class="form-row">
                <label for="telefonoEmpleado">Teléfono:</label>
                <input type="text" id="telefonoEmpleado" th:value="${empleado.telefono}" disabled>
            </div>
        </form>
    </div>
</div>

<!-- fragments/ cliente-calendario -->
<div th:fragment="cliente-calendario">
    <div class="calendar-container">
        <div id="calendar"></div>
    </div>
</div>
</body>
</html>
